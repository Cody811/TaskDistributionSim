function Sim(){this.simTime=0,this.entities=[],this.queue=new Sim.PQueue,this.endTime=0,this.entityId=1}function ARG_CHECK(t,e,i){if(t.length<e||t.length>i)throw new Error("Incorrect number of arguments");for(var s=0;s<t.length;s++)if(arguments[s+3]&&t[s]&&!(t[s]instanceof arguments[s+3]))throw new Error("parameter "+(s+1)+" is of incorrect type.")}Sim.prototype.time=function(){return this.simTime},Sim.prototype.sendMessage=function(){var t=this.source,e=this.msg,i=this.data,s=t.sim;if(i)if(i instanceof Array)for(r=i.length-1;r>=0;r--)(n=i[r])!==t&&n.onMessage&&n.onMessage.call(n,t,e);else i.onMessage&&i.onMessage.call(i,t,e);else for(var r=s.entities.length-1;r>=0;r--){var n;(n=s.entities[r])!==t&&n.onMessage&&n.onMessage.call(n,t,e)}},Sim.prototype.addEntity=function(t){if(!t.start)throw new Error("Entity prototype must have start() function defined");t.time||(t.time=function(){return this.sim.time()},t.setTimer=function(t){ARG_CHECK(arguments,1,1);var e=new Sim.Request(this,this.sim.time(),this.sim.time()+t);return this.sim.queue.insert(e),e},t.waitEvent=function(t){ARG_CHECK(arguments,1,1,Sim.Event);var e=new Sim.Request(this,this.sim.time(),0);return e.source=t,t.addWaitList(e),e},t.queueEvent=function(t){ARG_CHECK(arguments,1,1,Sim.Event);var e=new Sim.Request(this,this.sim.time(),0);return e.source=t,t.addQueue(e),e},t.useFacility=function(t,e){ARG_CHECK(arguments,2,2,Sim.Facility);var i=new Sim.Request(this,this.sim.time(),0);return i.source=t,t.use(e,i),i},t.putBuffer=function(t,e){ARG_CHECK(arguments,2,2,Sim.Buffer);var i=new Sim.Request(this,this.sim.time(),0);return i.source=t,t.put(e,i),i},t.getBuffer=function(t,e){ARG_CHECK(arguments,2,2,Sim.Buffer);var i=new Sim.Request(this,this.sim.time(),0);return i.source=t,t.get(e,i),i},t.putStore=function(t,e){ARG_CHECK(arguments,2,2,Sim.Store);var i=new Sim.Request(this,this.sim.time(),0);return i.source=t,t.put(e,i),i},t.getStore=function(t,e){ARG_CHECK(arguments,1,2,Sim.Store,Function);var i=new Sim.Request(this,this.sim.time(),0);return i.source=t,t.get(e,i),i},t.send=function(t,e,i){ARG_CHECK(arguments,2,3);var s=new Sim.Request(this.sim,this.time(),this.time()+e);s.source=this,s.msg=t,s.data=i,s.deliver=this.sim.sendMessage,this.sim.queue.insert(s)},t.log=function(t){ARG_CHECK(arguments,1,1),this.sim.log(t,this)});var e=function(t){if(null==t)throw TypeError();if(Object.create)return Object.create(t);var e=typeof t;if("object"!==e&&"function"!==e)throw TypeError();function i(){}return i.prototype=t,new i}(t);if(e.sim=this,e.id=this.entityId++,this.entities.push(e),arguments.length>1){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);e.start.apply(e,i)}else e.start();return e},Sim.prototype.simulate=function(t,e){e||(e=Math.Infinity);for(var i=0;;){if(++i>e)return!1;var s=this.queue.remove();if(null==s)break;if(s.deliverAt>t)break;this.simTime=s.deliverAt,s.cancelled||s.deliver()}return this.finalize(),!0},Sim.prototype.step=function(){for(;;){var t=this.queue.remove();if(!t)return!1;if(this.simTime=t.deliverAt,!t.cancelled){t.deliver();break}}return!0},Sim.prototype.finalize=function(){for(var t=0;t<this.entities.length;t++)this.entities[t].finalize&&this.entities[t].finalize()},Sim.prototype.setLogger=function(t){ARG_CHECK(arguments,1,1,Function),this.logger=t},Sim.prototype.log=function(t,e){if(ARG_CHECK(arguments,1,2),this.logger){var i="";void 0!==e&&(i=e.name?" ["+e.name+"]":" ["+e.id+"] "),this.logger(this.simTime.toFixed(6)+i+"   "+t)}},Sim.Facility=function(t,e,i,s){switch(ARG_CHECK(arguments,1,4),this.free=i||1,this.servers=i||1,this.maxqlen=void 0===s?-1:1*s,e){case Sim.Facility.LCFS:this.use=this.useLCFS,this.queue=new Sim.Queue;break;case Sim.Facility.PS:this.use=this.useProcessorSharing,this.queue=[];break;case Sim.Facility.FCFS:default:this.use=this.useFCFS,this.freeServers=new Array(this.servers),this.queue=new Sim.Queue;for(var r=0;r<this.freeServers.length;r++)this.freeServers[r]=!0}this.stats=new Sim.Population,this.busyDuration=0},Sim.Facility.FCFS=1,Sim.Facility.LCFS=2,Sim.Facility.PS=3,Sim.Facility.NumDisciplines=4,Sim.Facility.prototype.reset=function(){this.queue.reset(),this.stats.reset(),this.busyDuration=0},Sim.Facility.prototype.systemStats=function(){return this.stats},Sim.Facility.prototype.queueStats=function(){return this.queue.stats},Sim.Facility.prototype.usage=function(){return this.busyDuration},Sim.Facility.prototype.finalize=function(t){ARG_CHECK(arguments,1,1),this.stats.finalize(t),this.queue.stats.finalize(t)},Sim.Facility.prototype.useFCFS=function(t,e){if(ARG_CHECK(arguments,2,2),0===this.maxqlen&&!this.free||this.maxqlen>0&&this.queue.size()>=this.maxqlen)return e.msg=-1,e.deliverAt=e.entity.time(),void e.entity.sim.queue.insert(e);e.duration=t;var i=e.entity.time();this.stats.enter(i),this.queue.push(e,i),this.useFCFSSchedule(i)},Sim.Facility.prototype.useFCFSSchedule=function(t){for(ARG_CHECK(arguments,1,1);this.free>0&&!this.queue.empty();){var e=this.queue.shift(t);if(!e.cancelled){for(var i=0;i<this.freeServers.length;i++)if(this.freeServers[i]){this.freeServers[i]=!1,e.msg=i;break}this.free--,this.busyDuration+=e.duration,e.cancelRenegeClauses();var s=new Sim.Request(this,t,t+e.duration);s.done(this.useFCFSCallback,this,e),e.entity.sim.queue.insert(s)}}},Sim.Facility.prototype.useFCFSCallback=function(t){this.free++,this.freeServers[t.msg]=!0,this.stats.leave(t.scheduledAt,t.entity.time()),this.useFCFSSchedule(t.entity.time()),t.deliver()},Sim.Facility.prototype.useLCFS=function(t,e){ARG_CHECK(arguments,2,2),this.currentRO&&(this.busyDuration+=this.currentRO.entity.time()-this.currentRO.lastIssued,this.currentRO.remaining=this.currentRO.deliverAt-this.currentRO.entity.time(),this.queue.push(this.currentRO,e.entity.time())),this.currentRO=e,e.saved_deliver||(e.cancelRenegeClauses(),e.remaining=t,e.saved_deliver=e.deliver,e.deliver=this.useLCFSCallback,this.stats.enter(e.entity.time())),e.lastIssued=e.entity.time(),e.deliverAt=e.entity.time()+t,e.entity.sim.queue.insert(e)},Sim.Facility.prototype.useLCFSCallback=function(){var t=this,e=t.source;if(t==e.currentRO&&(e.currentRO=null,e.busyDuration+=t.entity.time()-t.lastIssued,e.stats.leave(t.scheduledAt,t.entity.time()),t.deliver=t.saved_deliver,delete t.saved_deliver,t.deliver(),!e.queue.empty())){var i=e.queue.pop(t.entity.time());e.useLCFS(i.remaining,i)}},Sim.Facility.prototype.useProcessorSharing=function(t,e){ARG_CHECK(arguments,2,2,null,Sim.Request),e.duration=t,e.cancelRenegeClauses(),this.stats.enter(e.entity.time()),this.useProcessorSharingSchedule(e,!0)},Sim.Facility.prototype.useProcessorSharingSchedule=function(t,e){var i=t.entity.time(),s=this.queue.length,r=e?(s+1)/s:(s-1)/s,n=[];0===this.queue.length&&(this.lastIssued=i);for(var a=0;a<s;a++){var o,u=this.queue[a];u.ro!==t&&((o=new Sim.Request(this,i,i+(u.deliverAt-i)*r)).ro=u.ro,o.source=this,o.deliver=this.useProcessorSharingCallback,n.push(o),u.cancel(),t.entity.sim.queue.insert(o))}e&&((o=new Sim.Request(this,i,i+t.duration*(s+1))).ro=t,o.source=this,o.deliver=this.useProcessorSharingCallback,n.push(o),t.entity.sim.queue.insert(o)),this.queue=n,0==this.queue.length&&(this.busyDuration+=i-this.lastIssued)},Sim.Facility.prototype.useProcessorSharingCallback=function(){var t=this,e=t.source;t.cancelled||(e.stats.leave(t.ro.scheduledAt,t.ro.entity.time()),e.useProcessorSharingSchedule(t.ro,!1),t.ro.deliver())},Sim.Buffer=function(t,e,i){ARG_CHECK(arguments,2,3),this.name=t,this.capacity=e,this.available=void 0===i?0:i,this.putQueue=new Sim.Queue,this.getQueue=new Sim.Queue},Sim.Buffer.prototype.current=function(){return this.available},Sim.Buffer.prototype.size=function(){return this.capacity},Sim.Buffer.prototype.get=function(t,e){if(ARG_CHECK(arguments,2,2),this.getQueue.empty()&&t<=this.available)return this.available-=t,e.deliverAt=e.entity.time(),e.entity.sim.queue.insert(e),this.getQueue.passby(e.deliverAt),void this.progressPutQueue();e.amount=t,this.getQueue.push(e,e.entity.time())},Sim.Buffer.prototype.put=function(t,e){if(ARG_CHECK(arguments,2,2),this.putQueue.empty()&&t+this.available<=this.capacity)return this.available+=t,e.deliverAt=e.entity.time(),e.entity.sim.queue.insert(e),this.putQueue.passby(e.deliverAt),void this.progressGetQueue();e.amount=t,this.putQueue.push(e,e.entity.time())},Sim.Buffer.prototype.progressGetQueue=function(){for(var t;t=this.getQueue.top();)if(t.cancelled)this.getQueue.shift(t.entity.time());else{if(!(t.amount<=this.available))break;this.getQueue.shift(t.entity.time()),this.available-=t.amount,t.deliverAt=t.entity.time(),t.entity.sim.queue.insert(t)}},Sim.Buffer.prototype.progressPutQueue=function(){for(var t;t=this.putQueue.top();)if(t.cancelled)this.putQueue.shift(t.entity.time());else{if(!(t.amount+this.available<=this.capacity))break;this.putQueue.shift(t.entity.time()),this.available+=t.amount,t.deliverAt=t.entity.time(),t.entity.sim.queue.insert(t)}},Sim.Buffer.prototype.putStats=function(){return this.putQueue.stats},Sim.Buffer.prototype.getStats=function(){return this.getQueue.stats},Sim.Store=function(t,e){ARG_CHECK(arguments,2,3),this.name=t,this.capacity=e,this.objects=[],this.putQueue=new Sim.Queue,this.getQueue=new Sim.Queue},Sim.Store.prototype.current=function(){return this.objects.length},Sim.Store.prototype.size=function(){return this.capacity},Sim.Store.prototype.get=function(t,e){if(ARG_CHECK(arguments,2,2),this.getQueue.empty()&&this.current()>0){var i,s=!1;if(t){for(var r=0;r<this.objects.length;r++)if(t(i=this.objects[r])){s=!0,this.objects.splice(r,1);break}}else i=this.objects.shift(),s=!0;if(s)return this.available--,e.msg=i,e.deliverAt=e.entity.time(),e.entity.sim.queue.insert(e),this.getQueue.passby(e.deliverAt),void this.progressPutQueue()}e.filter=t,this.getQueue.push(e,e.entity.time())},Sim.Store.prototype.put=function(t,e){if(ARG_CHECK(arguments,2,2),this.putQueue.empty()&&this.current()<this.capacity)return this.available++,e.deliverAt=e.entity.time(),e.entity.sim.queue.insert(e),this.putQueue.passby(e.deliverAt),this.objects.push(t),void this.progressGetQueue();e.obj=t,this.putQueue.push(e,e.entity.time())},Sim.Store.prototype.progressGetQueue=function(){for(var t;t=this.getQueue.top();)if(t.cancelled)this.getQueue.shift(t.entity.time());else{if(!(this.current()>0))break;var e,i=t.filter,s=!1;if(i){for(var r=0;r<this.objects.length;r++)if(i(e=this.objects[r])){s=!0,this.objects.splice(r,1);break}}else e=this.objects.shift(),s=!0;if(!s)break;this.getQueue.shift(t.entity.time()),this.available--,t.msg=e,t.deliverAt=t.entity.time(),t.entity.sim.queue.insert(t)}},Sim.Store.prototype.progressPutQueue=function(){for(var t;t=this.putQueue.top();)if(t.cancelled)this.putQueue.shift(t.entity.time());else{if(!(this.current()<this.capacity))break;this.putQueue.shift(t.entity.time()),this.available++,this.objects.push(t.obj),t.deliverAt=t.entity.time(),t.entity.sim.queue.insert(t)}},Sim.Store.prototype.putStats=function(){return this.putQueue.stats},Sim.Store.prototype.getStats=function(){return this.getQueue.stats},Sim.Event=function(t){ARG_CHECK(arguments,0,1),this.name=t,this.waitList=[],this.queue=[],this.isFired=!1},Sim.Event.prototype.addWaitList=function(t){if(ARG_CHECK(arguments,1,1),this.isFired)return t.deliverAt=t.entity.time(),void t.entity.sim.queue.insert(t);this.waitList.push(t)},Sim.Event.prototype.addQueue=function(t){if(ARG_CHECK(arguments,1,1),this.isFired)return t.deliverAt=t.entity.time(),void t.entity.sim.queue.insert(t);this.queue.push(t)},Sim.Event.prototype.fire=function(t){ARG_CHECK(arguments,0,1),t&&(this.isFired=!0);var e=this.waitList;this.waitList=[];for(var i=0;i<e.length;i++)e[i].deliver();var s=this.queue.shift();s&&s.deliver()},Sim.Event.prototype.clear=function(){this.isFired=!1},Sim.Request=function(t,e,i){this.entity=t,this.scheduledAt=e,this.deliverAt=i,this.callbacks=[],this.cancelled=!1,this.group=null},Sim.Request.prototype.cancel=function(){if(this.group&&this.group[0]!=this)return this.group[0].cancel();if(this.noRenege)return this;if(!this.cancelled&&(this.cancelled=!0,0==this.deliverAt&&(this.deliverAt=this.entity.time()),this.source&&(this.source instanceof Sim.Buffer||this.source instanceof Sim.Store)&&(this.source.progressPutQueue.call(this.source),this.source.progressGetQueue.call(this.source)),this.group))for(var t=1;t<this.group.length;t++)this.group[t].cancelled=!0,0==this.group[t].deliverAt&&(this.group[t].deliverAt=this.entity.time())},Sim.Request.prototype.done=function(t,e,i){return ARG_CHECK(arguments,0,3,Function,Object),this.callbacks.push([t,e,i]),this},Sim.Request.prototype.waitUntil=function(t,e,i,s){if(ARG_CHECK(arguments,1,4,void 0,Function,Object),this.noRenege)return this;var r=this._addRequest(this.scheduledAt+t,e,i,s);return this.entity.sim.queue.insert(r),this},Sim.Request.prototype.unlessEvent=function(t,e,i,s){if(ARG_CHECK(arguments,1,4,void 0,Function,Object),this.noRenege)return this;if(t instanceof Sim.Event)(n=this._addRequest(0,e,i,s)).msg=t,t.addWaitList(n);else if(t instanceof Array)for(var r=0;r<t.length;r++){var n;(n=this._addRequest(0,e,i,s)).msg=t[r],t[r].addWaitList(n)}return this},Sim.Request.prototype.setData=function(t){return this.data=t,this},Sim.Request.prototype.deliver=function(){this.cancelled||(this.cancel(),this.callbacks&&(this.group&&this.group.length>0?this._doCallback(this.group[0].source,this.msg,this.group[0].data):this._doCallback(this.source,this.msg,this.data)))},Sim.Request.prototype.cancelRenegeClauses=function(){if(this.noRenege=!0,this.group&&this.group[0]==this)for(var t=1;t<this.group.length;t++)this.group[t].cancelled=!0,0==this.group[t].deliverAt&&(this.group[t].deliverAt=this.entity.time())},Sim.Request.prototype.Null=function(){return this},Sim.Request.prototype._addRequest=function(t,e,i,s){var r=new Sim.Request(this.entity,this.scheduledAt,t);return r.callbacks.push([e,i,s]),null===this.group&&(this.group=[this]),this.group.push(r),r.group=this.group,r},Sim.Request.prototype._doCallback=function(t,e,i){for(var s=0;s<this.callbacks.length;s++){var r=this.callbacks[s][0];if(r){var n=this.callbacks[s][1];n||(n=this.entity);var a=this.callbacks[s][2];n.callbackSource=t,n.callbackMessage=e,n.callbackData=i,a?a instanceof Array?r.apply(n,a):r.call(n,a):r.call(n),n.callbackSource=null,n.callbackMessage=null,n.callbackData=null}}},Sim.Queue=function(t){this.name=t,this.data=[],this.timestamp=[],this.stats=new Sim.Population},Sim.Queue.prototype.top=function(){return this.data[0]},Sim.Queue.prototype.back=function(){return this.data.length?this.data[this.data.length-1]:void 0},Sim.Queue.prototype.push=function(t,e){ARG_CHECK(arguments,2,2),this.data.push(t),this.timestamp.push(e),this.stats.enter(e)},Sim.Queue.prototype.unshift=function(t,e){ARG_CHECK(arguments,2,2),this.data.unshift(t),this.timestamp.unshift(e),this.stats.enter(e)},Sim.Queue.prototype.shift=function(t){ARG_CHECK(arguments,1,1);var e=this.data.shift(),i=this.timestamp.shift();return this.stats.leave(i,t),e},Sim.Queue.prototype.pop=function(t){ARG_CHECK(arguments,1,1);var e=this.data.pop(),i=this.timestamp.pop();return this.stats.leave(i,t),e},Sim.Queue.prototype.passby=function(t){ARG_CHECK(arguments,1,1),this.stats.enter(t),this.stats.leave(t,t)},Sim.Queue.prototype.finalize=function(t){ARG_CHECK(arguments,1,1),this.stats.finalize(t)},Sim.Queue.prototype.reset=function(){this.stats.reset()},Sim.Queue.prototype.clear=function(){this.reset(),this.data=[],this.timestamp=[]},Sim.Queue.prototype.report=function(){return[this.stats.sizeSeries.average(),this.stats.durationSeries.average()]},Sim.Queue.prototype.empty=function(){return 0==this.data.length},Sim.Queue.prototype.size=function(){return this.data.length},Sim.PQueue=function(){this.data=[],this.order=0},Sim.PQueue.prototype.greater=function(t,e){return t.deliverAt>e.deliverAt||t.deliverAt==e.deliverAt&&t.order>e.order},Sim.PQueue.prototype.insert=function(t){ARG_CHECK(arguments,1,1),t.order=this.order++;var e=this.data.length;this.data.push(t);for(var i=this.data,s=i[e];e>0;){var r=Math.floor((e-1)/2);if(!this.greater(i[r],t))break;i[e]=i[r],e=r}i[e]=s},Sim.PQueue.prototype.remove=function(){var t=this.data,e=t.length;if(!(e<=0)){if(1==e)return this.data.pop();var i=t[0];t[0]=t.pop(),e--;for(var s=0,r=t[s];s<Math.floor(e/2);){var n=2*s+1,a=2*s+2,o=a<e&&!this.greater(t[a],t[n])?a:n;if(this.greater(t[o],r))break;t[s]=t[o],s=o}return t[s]=r,i}},Sim.DataSeries=function(t){this.name=t,this.reset()},Sim.DataSeries.prototype.reset=function(){if(this.Count=0,this.W=0,this.A=0,this.Q=0,this.Max=-1/0,this.Min=1/0,this.Sum=0,this.histogram)for(var t=0;t<this.histogram.length;t++)this.histogram[t]=0},Sim.DataSeries.prototype.setHistogram=function(t,e,i){ARG_CHECK(arguments,3,3),this.hLower=t,this.hUpper=e,this.hBucketSize=(e-t)/i,this.histogram=new Array(i+2);for(var s=0;s<this.histogram.length;s++)this.histogram[s]=0},Sim.DataSeries.prototype.getHistogram=function(){return this.histogram},Sim.DataSeries.prototype.record=function(t,e){ARG_CHECK(arguments,1,2);var i=void 0===e?1:e;if(t>this.Max&&(this.Max=t),t<this.Min&&(this.Min=t),this.Sum+=t,this.Count++,this.histogram)if(t<this.hLower)this.histogram[0]+=i;else if(t>this.hUpper)this.histogram[this.histogram.length-1]+=i;else{var s=Math.floor((t-this.hLower)/this.hBucketSize)+1;this.histogram[s]+=i}if(this.W=this.W+i,0!==this.W){var r=this.A;this.A=r+i/this.W*(t-r),this.Q=this.Q+i*(t-r)*(t-this.A)}},Sim.DataSeries.prototype.count=function(){return this.Count},Sim.DataSeries.prototype.min=function(){return this.Min},Sim.DataSeries.prototype.max=function(){return this.Max},Sim.DataSeries.prototype.range=function(){return this.Max-this.Min},Sim.DataSeries.prototype.sum=function(){return this.Sum},Sim.DataSeries.prototype.sumWeighted=function(){return this.A*this.W},Sim.DataSeries.prototype.average=function(){return this.A},Sim.DataSeries.prototype.variance=function(){return this.Q/this.W},Sim.DataSeries.prototype.deviation=function(){return Math.sqrt(this.variance())},Sim.TimeSeries=function(t){this.dataSeries=new Sim.DataSeries(t)},Sim.TimeSeries.prototype.reset=function(){this.dataSeries.reset(),this.lastValue=NaN,this.lastTimestamp=NaN},Sim.TimeSeries.prototype.setHistogram=function(t,e,i){ARG_CHECK(arguments,3,3),this.dataSeries.setHistogram(t,e,i)},Sim.TimeSeries.prototype.getHistogram=function(){return this.dataSeries.getHistogram()},Sim.TimeSeries.prototype.record=function(t,e){ARG_CHECK(arguments,2,2),isNaN(this.lastTimestamp)||this.dataSeries.record(this.lastValue,e-this.lastTimestamp),this.lastValue=t,this.lastTimestamp=e},Sim.TimeSeries.prototype.finalize=function(t){ARG_CHECK(arguments,1,1),this.record(NaN,t)},Sim.TimeSeries.prototype.count=function(){return this.dataSeries.count()},Sim.TimeSeries.prototype.min=function(){return this.dataSeries.min()},Sim.TimeSeries.prototype.max=function(){return this.dataSeries.max()},Sim.TimeSeries.prototype.range=function(){return this.dataSeries.range()},Sim.TimeSeries.prototype.sum=function(){return this.dataSeries.sum()},Sim.TimeSeries.prototype.average=function(){return this.dataSeries.average()},Sim.TimeSeries.prototype.deviation=function(){return this.dataSeries.deviation()},Sim.TimeSeries.prototype.variance=function(){return this.dataSeries.variance()},Sim.Population=function(t){this.name=t,this.population=0,this.sizeSeries=new Sim.TimeSeries,this.durationSeries=new Sim.DataSeries},Sim.Population.prototype.reset=function(){this.sizeSeries.reset(),this.durationSeries.reset(),this.population=0},Sim.Population.prototype.enter=function(t){ARG_CHECK(arguments,1,1),this.population++,this.sizeSeries.record(this.population,t)},Sim.Population.prototype.leave=function(t,e){ARG_CHECK(arguments,2,2),this.population--,this.sizeSeries.record(this.population,e),this.durationSeries.record(e-t)},Sim.Population.prototype.current=function(){return this.population},Sim.Population.prototype.finalize=function(t){this.sizeSeries.finalize(t)};var Random=function(t){if("number"!=typeof(t=void 0===t?(new Date).getTime():t)||Math.ceil(t)!=Math.floor(t))throw new TypeError("seed value must be an integer");this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_by_array([t],1)};Random.prototype.init_genrand=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++)this.mt[this.mti]=(1812433253*((4294901760&(t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30))>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0},Random.prototype.init_by_array=function(t,e){var i,s,r;for(this.init_genrand(19650218),i=1,s=0,r=this.N>e?this.N:e;r;r--)this.mt[i]=(this.mt[i]^(1664525*((4294901760&(n=this.mt[i-1]^this.mt[i-1]>>>30))>>>16)<<16)+1664525*(65535&n))+t[s]+s,this.mt[i]>>>=0,s++,++i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1),s>=e&&(s=0);for(r=this.N-1;r;r--){var n;this.mt[i]=(this.mt[i]^(1566083941*((4294901760&(n=this.mt[i-1]^this.mt[i-1]>>>30))>>>16)<<16)+1566083941*(65535&n))-i,this.mt[i]>>>=0,++i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1)}this.mt[0]=2147483648},Random.prototype.genrand_int32=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var i;for(this.mti==this.N+1&&this.init_genrand(5489),i=0;i<this.N-this.M;i++)this.mt[i]=this.mt[i+this.M]^(t=this.mt[i]&this.UPPER_MASK|this.mt[i+1]&this.LOWER_MASK)>>>1^e[1&t];for(;i<this.N-1;i++)this.mt[i]=this.mt[i+(this.M-this.N)]^(t=this.mt[i]&this.UPPER_MASK|this.mt[i+1]&this.LOWER_MASK)>>>1^e[1&t];this.mt[this.N-1]=this.mt[this.M-1]^(t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK)>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},Random.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},Random.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},Random.prototype.random=function(){return this.pythonCompatibility&&(this.skip&&this.genrand_int32(),this.skip=!0),this.genrand_int32()*(1/4294967296)},Random.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},Random.prototype.genrand_res53=function(){return(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))*(1/9007199254740992)},Random.prototype.LOG4=Math.log(4),Random.prototype.SG_MAGICCONST=1+Math.log(4.5),Random.prototype.exponential=function(t){if(1!=arguments.length)throw new SyntaxError("exponential() must  be called with 'lambda' parameter");var e=this.random();return-Math.log(e)/t},Random.prototype.gamma=function(t,e){if(2!=arguments.length)throw new SyntaxError("gamma() must be called with alpha and beta parameters");if(!(t>1)){if(1==t){for(var i=this.random();i<=1e-7;)i=this.random();return-Math.log(i)*e}for(;;){i=this.random();var s=(Math.E+t)/Math.E,r=s*i;if(h=r<=1?Math.pow(r,1/t):-Math.log((s-r)/t),u=this.random(),r>1){if(u<=Math.pow(h,t-1))break}else if(u<=Math.exp(-h))break}return h*e}for(var n=Math.sqrt(2*t-1),a=t-this.LOG4,o=t+n;;){var u;if(!((u=this.random())<1e-7||i>.9999999)){var h,m=1-this.random(),p=Math.log(u/(1-u))/n,l=u*u*m,c=a+o*p-(h=t*Math.exp(p));if(c+this.SG_MAGICCONST-4.5*l>=0||c>=Math.log(l))return h*e}}},Random.prototype.normal=function(t,e){if(2!=arguments.length)throw new SyntaxError("normal() must be called with mu and sigma parameters");var i=this.lastNormal;if(this.lastNormal=NaN,!i){var s=2*this.random()*Math.PI,r=Math.sqrt(-2*Math.log(1-this.random()));i=Math.cos(s)*r,this.lastNormal=Math.sin(s)*r}return t+i*e},Random.prototype.pareto=function(t){if(1!=arguments.length)throw new SyntaxError("pareto() must be called with alpha parameter");var e=this.random();return 1/Math.pow(1-e,1/t)},Random.prototype.triangular=function(t,e,i){if(3!=arguments.length)throw new SyntaxError("triangular() must be called with lower, upper and mode parameters");var s=(i-t)/(e-t),r=this.random();return r<=s?t+Math.sqrt(r*(e-t)*(i-t)):e-Math.sqrt((1-r)*(e-t)*(e-i))},Random.prototype.uniform=function(t,e){if(2!=arguments.length)throw new SyntaxError("uniform() must be called with lower and upper parameters");return t+this.random()*(e-t)},Random.prototype.weibull=function(t,e){if(2!=arguments.length)throw new SyntaxError("weibull() must be called with alpha and beta parameters");var i=1-this.random();return t*Math.pow(-Math.log(i),1/e)};